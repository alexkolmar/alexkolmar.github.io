<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Генератор картинок-заглушек</title>
<style>
    body { font-family: sans-serif; padding: 20px; max-width: 500px; margin: auto; }
    input { margin: 5px 0; padding: 5px; width: 100%; box-sizing: border-box; }
    label { font-weight: bold; display: block; margin-top: 10px; }
    button { margin-top: 15px; padding: 8px 12px; cursor: pointer; }
    .output { margin-top: 20px; padding: 10px; border: 1px solid #ccc; background: #f9f9f9; }
    code { display: block; background: #eee; padding: 5px; margin-top: 5px; white-space: pre-wrap; overflow-wrap: break-word }
</style>
</head>
<body>
<h1>Генератор картинок-заглушек</h1>

<label>Ширина (px)</label>
<input type="number" id="width" value="400" />

<label>Высота (px)</label>
<input type="number" id="height" value="300" />

<label>Цвет фона (hex без #)</label>
<input type="text" id="bg" value="cccccc" />

<label>Цвет текста (hex без #)</label>
<input type="text" id="fg" value="333333" />

<label>Текст (опционально)</label>
<input type="text" id="txt" placeholder="Оставьте пустым, чтобы использовать размеры" />

<button onclick="generate()">Сгенерировать ссылку</button>

<div class="output" id="output" style="display:none;">
    <p><strong>Предпросмотр:</strong></p>
    <img id="preview" alt="placeholder preview" style="max-width:100%; border:1px solid #ccc;" />
    
    <p><strong>Прямая ссылка:</strong></p>
    <code id="direct"></code>
    
    <p><strong>HTML код:</strong></p>
    <code id="htmlcode"></code>
</div>

<script>
const baseURL = "https://alexkolmar.github.io/00-mainfiles/placeholder/placeholder.html";

function generate() {
    const w = parseInt(document.getElementById('width').value) || 400;
    const h = parseInt(document.getElementById('height').value) || 300;
    const bg = document.getElementById('bg').value.replace('#', '') || 'cccccc';
    const fg = document.getElementById('fg').value.replace('#', '') || '333333';
    let txt = document.getElementById('txt').value.trim();

    if (!txt) txt = `${w}×${h}`;

    const format = 'svg';
    const txtWithExt = `${txt}.${format}`;

    const url = `${baseURL}?w=${w}&h=${h}&bg=${bg}&fg=${fg}&txt=${encodeURIComponent(txtWithExt)}`;

    // Локальное SVG-превью как Data URL
    const svgContent = `
<svg xmlns="http://www.w3.org/2000/svg" width="${w}" height="${h}">
  <rect width="100%" height="100%" fill="#${bg}"/>
  <text x="50%" y="50%" font-size="${Math.floor(w/10)}" fill="#${fg}" dominant-baseline="middle" text-anchor="middle" font-family="Arial">${txt}</text>
</svg>`;
    const svg64 = btoa(unescape(encodeURIComponent(svgContent)));
    const dataUrl = 'data:image/svg+xml;base64,' + svg64;

    document.getElementById('preview').src = dataUrl;

    document.getElementById('direct').textContent = url;
    document.getElementById('htmlcode').textContent = `<img src="${url}" alt="Placeholder">`;
    document.getElementById('output').style.display = 'block';
}
</script>
</body>
</html>
